<% suppress_header = nil unless local_assigns.has_key? :suppress_header %>
<% use_paging = false unless local_assigns.has_key? :use_paging %>
<% show_search = false unless local_assigns.has_key? :show_search %>
<% page_length = 10 unless local_assigns.has_key? :page_length %>
<% table_id = "" unless local_assigns.has_key? :table_id %>

<table class="table table-striped table-hover main-search-list" 
       data-id="<%= table_id %>" 
       data-table-name="Venues" 
       data-controller="row-navigation infinite-scroll"
       data-infinite-scroll-url-value="/venues/infinite_scroll"
       data-infinite-scroll-current-page-value="<%= defined?(@pagy) && @pagy ? @pagy.page : 1 %>"
       data-infinite-scroll-has-next-page-value="<%= defined?(@pagy) && @pagy ? @pagy.next.present? : false %>"
       data-infinite-scroll-current-sort-value="<%= params[:sort] %>"
       data-infinite-scroll-current-direction-value="<%= params[:direction] %>"
       data-infinite-scroll-search-type-value="<%= params[:search_type] %>"
       data-infinite-scroll-search-value-value="<%= params[:search_value] %>"
       data-infinite-scroll-query-type-value="<%= params[:query_id].present? ? 'quick_query' : 'search' %>"
       data-infinite-scroll-query-id-value="<%= params[:query_id] %>"
       data-infinite-scroll-query-attribute-value="<%= params[:query_attribute] %>"
       style="table-layout: fixed;">
  <thead>
  <tr>
  <th style="width: 25%;"><%= sortable_column_header('venue', 'Venue', params[:sort], params[:direction]) %></th>
  <th style="width: 15%;"><%= sortable_column_header('city', 'City', params[:sort], params[:direction]) %></th>
  <th style="width: 15%;"><%= sortable_column_header('subcity', 'Subcity', params[:sort], params[:direction]) %></th>
  <th style="width: 10%;"><%= sortable_column_header('state', 'State', params[:sort], params[:direction]) %></th>
  <th style="width: 10%;"><%= sortable_column_header('country', 'Country', params[:sort], params[:direction]) %></th>
  <th style="width: 15%;"><%= sortable_column_header('performances', 'Performances', params[:sort], params[:direction]) %></th>
  <% if can? :manage, Venue %>
    <th style="width: 10%;">Actions</th>
  <% end %>
  </tr>
  </thead>
  <tbody data-infinite-scroll-target="tbody">
  <%= render 'venue_rows', venues: venues %>
  </tbody>
</table>

<%# if defined?(@pagy) && @pagy && @pagy.pages > 1 %>
  <%# <%= render 'shared/pagination', pagy: @pagy %> 
<%# end %>
