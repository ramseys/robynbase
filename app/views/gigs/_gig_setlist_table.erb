<table id="<%=id%>" class="sortable-table">

    <thead>
        <tr>
            <th></th>
            <th>Song</th>
            <th>Song Name Override</th>
            <th>Version Notes</th>
            <th>Media Link</th>
            <th>Action</th>
        </tr>
    </thead>


    <tbody data-controller="sortable" data-sortable-field-value="Chrono">

    <% sequenceIndex = 1 %>

    <div style="display: none">
        <select id="template-song-selector" class="form-control song-selector" data-gig-target="templateSongSelector">
            <option value=""></option>
            <% @song_list.map do |s| %>
                <option value="<%= s[1] %>"><%= s[0] %></option>
            <% end %>
        </select>
    </div>

    <%= f.fields_for :gigsets, gset do |gigset_fields| %>
        <tr data-row=<%= sequenceIndex %>>
            <td class="drag-handle">
                <i class="bi bi-grip-vertical"></i>
                <%= gigset_fields.hidden_field :Chrono, value: sequenceIndex %>
            </td>
            <td> <%= gigset_fields.select(:SONGID, @song_list, {include_blank: true}, { class: "form-control song-selector" })%> </td>
            <td> <%= gigset_fields.text_field :Song, :class => "form-control" %></td>
            <td> 
                <%= gigset_fields.text_field :VersionNotes, :class => "form-control" %> 
                <%= gigset_fields.hidden_field :Encore %> 
            </td>            
            <td> <%= gigset_fields.text_field :MediaLink, :class => "form-control" %></td>
            <td> 
                <Button type="button" class="btn btn-link" 
                        data-action="click->gig#removeRow"
                        data-gig-table-id-param="<%=id%>"
                        data-gig-row-id-param="<%=sequenceIndex%>">
                    Remove
                </Button>
            </td>

        </tr>

        <% sequenceIndex+=1 %>

    <% end %>

    </tbody>

</table>

<br/>

<button type="button" class="btn btn-primary" 
        data-action="click->gig#addSong"
        data-gig-table-id-param="<%=id%>"
        data-gig-encore-param="<%=encore%>">Add Song</button>
